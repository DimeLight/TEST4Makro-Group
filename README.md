Тестовое задание для Макро групп

Задание 1. Постобработка кадра.


Входные данные: 	С++ файл prob1.cpp с кодом, который необходимо дополнить;

Выходные данные: 	В качестве результата ожидается дополненный исходный файл prob1.cpp;

Время выполнения: 	примерно 8 часов

Язык выполнения: 	C/C++

ВАЖНО! Даже если ты смог написать одну функцию высылай результат! Даже если попробовал, но думаешь что не получилось все равно высылай!
Комментарии в коде необходимы чтобы понять твой замысел.

Обязательно в начале кода напиши ФИО и контакт для связи иначе мы не узнаем героя!

 Условие задачи:
 
Дан файл с кодом (prob1.cpp), в котором описаны следующие структуры:

image: Структура изображения:

• width, height	– размеры изображения в пикселях;
• format 		– формат изображения:
 ◦ GRAY 		серое изображение (на каждый пиксель 8 бит);
 ◦ RGB/BGR   	цветное изображение (на каждый пиксель 24 бита).
• data  		– массив хранящий непосредственное изображение. Элементы занимают 8 бит, соответственно для цветных форматов информация о пикселях идет последовательно, на каждый пиксель три элемента для соответствующих цветов.


box: Структура, описывающая обнаруженные объекты:

 • x1, y1		– координаты левой  верхней точки рамки;
 
 • x2, y2		– координаты правой нижней точки рамки;
 
 • type		– тип объекта (0-лицо, 1-пистолет, 2-маска).

 
frame: Структура, описывающая кадр:

 • img		– структура изображения кадра;
 
 • boxes		– массив структур обнаруженных объектов, которые отрисовываются.

 
В качестве тестового задания вам предлагается написать код для функций:

 1. bool rgb2bgr(image &img);
    
функция должна преобразовывать передаваемое в качестве аргумента изображение из формата RGB в формат BGR. Функция должна возвращать true в случае успешного преобразования, и false если преботразование выполнить невозможно.


 2. void frame_clean(frame& f, float threshold);
    
В результате работы нейронной сети часто один объект детектируется несколько раз, это означает что кадр содержит несколько рамок, которые определяют один и тот же реальный объект. Для решения этой проблемы будем считать что две структуры box одного типа описывают один и тот же объект, если геометрическое пересечение их прямоугольников (IoU) больше либо равно порогового значения threshold. Считать, что рамки не отсортированны.


![image](https://github.com/user-attachments/assets/8a3a58fe-2818-43f7-a3fb-a204c68d9539)
Рисунок 1. Изображение до обработки функции


![image](https://github.com/user-attachments/assets/7c74f3de-d942-458e-ba21-e0bbded33744)
Рисунок 2. Изображение после обработки 

 3. frame union_frames(frame& f1, frame& f2, float threshold)
 4. 
Данная функция должна обработать два кадра и в результате вернуть третий кадр, с тем же изображением, но с объединенными рамками двух кадров. Другими словами массив рамок результирующего изображения должен содержать по одной рамке для каждого объекта, обнаруженных на двух кадрах. Так же будем считать что две структуры box одного типа описывают один и тот же объект, если геометрическое пересечение их прямоугольников (IoU) больше либо равно порогового значения threshold. Считать, что рамки не отсортированны.
